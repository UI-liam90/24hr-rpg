---
import { Picture } from "astro-imagetools/components";
import Btn from "../components/Btn.astro";
export interface Props {
    charityLogo?: string;
    charityName?: string;
    link?: string;
}
const {  charityLogo, charityName, link } = Astro.props as Props;
---
<div class="menu-link">
    <a id="offcanvas-button" class="offcanvas-link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
    </a>
</div>


<div id="offcanvas-menu" class="offcanvas-menu">
    <div id="offcanvas-close" class="offcanvas-close">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
    </div>
    <nav>
        <ul>
            <li>
                <a href="/">Home</a>
            </li>
            <li>
                <a href="/gm-information">GM Information</a>
            </li>
            <li>
                <a href="/player-information">Player Information</a>
            </li>
        </ul>
    </nav>
    <div class="off-canvas-extra">
        <!-- <h2 class="event_date">{the_date_formated}</h2>
        <div id="clockdiv" class="countdown-timer" data-date={timer_date}>
            <div>
                <span class="days countdown-timer__unit"></span>
                <div class="smalltext">Days</div>
            </div>
            <div>
                <span class="hours countdown-timer__unit"></span>
                <div class="smalltext">Hours</div>
            </div>
            <div>
                <span class="minutes countdown-timer__unit"></span>
                <div class="smalltext">Minutes</div>
            </div>
            <div>
                <span class="seconds countdown-timer__unit"></span>
                <div class="smalltext">Seconds</div>
            </div>
        </div> -->
        <div class="charity">
            <h2>This year in support of:</h2>
            <div class="charity__image">
                <Picture src={charityLogo} alt={charityName} />
            </div>
            <Btn text="Donate" type="secondary" link={link} target="_BLANK" />
        </div>
    </div>
</div>

<style>
    .menu-link {
        --size: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        bottom: 30px;
        right: 30px;
        background-color: var(--dblue);
        width: var(--size);
        height: var(--size);
        border-radius: 50%;
        filter: drop-shadow(0 0 10px var(--white));
        z-index: 9999;
        @media screen and (min-width: 1024px) {
            bottom: auto;
            top: 30px;
        }
    }
    .offcanvas-menu {
        position: fixed;
        z-index: 9999;
        background-color: var(--dblue);
        inset: 0;
        width: 100vw;
        height: 100vh;
        overflow-x: hidden;
        overflow-y: auto;
        transform: scale(0);
        transform-origin: center;
        transition: transform 350ms ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        &.open {
            transform: scale(1);
        }
        ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        ul li {
            padding: 4px 20px;
            text-align: center;
        }
        ul li a {
            font-size: var(--font-size-fox);
            color: var(--white);
            font-weight: 700;
            text-decoration: none;
        }
    }
    .offcanvas-link, .offcanvas-close {
        position: relative;
        z-index: 999;
        display: block;
        width: 30px;
        cursor: pointer;
    }
    .offcanvas-close {
        width: 100%;
        grid-column: span 2;
        padding: 20px;
        display: flex;
        justify-content: flex-end;
    }
    .offcanvas-close svg {
        width: 30px;
        height: 30px;
    }
    .offcanvas-link svg, .offcanvas-close svg {
        fill: var(--white);
    }
    .off-canvas-extra {
        margin: 20px;
        padding-top: 20px;
        border-top: 1px solid var(--canvas);
        .charity {
            display: inline-flex;
            flex-flow: column nowrap;
            align-items: center;
            justify-content: flex-start;
            margin: 40px 0 12px;
            h2 {
                color: var(--canvas);
                text-align: center;
                font-size: var(--font-size-wolf);
            }
            .charity__image {
                max-width: 300px;
                margin: 12px 0 32px;
            }
        }

    }

</style>

<script>
    let offcanvasMenu = document.querySelector('#offcanvas-menu');
    let offcanvasButton = document.querySelector('#offcanvas-button');
    let offcanvasCloseButton = document.querySelector('#offcanvas-close');
    let root = document.documentElement;

    console.log(offcanvasButton);

    offcanvasButton.addEventListener('click', (e)=>{
        e.preventDefault();
        offcanvasMenu.classList.add('open');
        root.classList.add('off-canvas-open');
    });
    offcanvasCloseButton.addEventListener('click', (e)=>{
        e.preventDefault();
        offcanvasMenu.classList.remove('open');
        root.classList.remove('off-canvas-open');
    });

</script>